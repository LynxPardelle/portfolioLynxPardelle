# =============================================================================
# Staging Environment Configuration
# =============================================================================
# Copy this file to .env.staging and customize values for staging deployment
# This file contains staging-specific settings for testing unified MongoDB container
# =============================================================================

# Environment
ENVIRONMENT=staging
COMPOSE_PROJECT_NAME=portfolio-staging

# Staging Versions
STAGING_VERSION=2.0.0-staging
APP_STAGING_VERSION=staging
MONGO_VERSION=8.0.13

# =============================================================================
# MongoDB Staging Configuration
# =============================================================================
MONGO_STAGING_PORT=27018
MONGO_STATUS_PORT=28018
MONGO_ROOT_USERNAME=staging_root
MONGO_ROOT_PASSWORD=staging_secure_root_password_2025
MONGO_PORT=27017

# Application Database (Staging)
MONGO_APP_DB=lynx_portfolio_staging
MONGO_APP_USER=portfolio_staging
MONGO_APP_PASSWORD=staging_portfolio_password_2025
MONGO_APP_TEST_DB=lynx_portfolio_test_staging

# =============================================================================
# Application Staging Configuration
# =============================================================================
APP_STAGING_PORT=3001
NODE_ENV=staging

# Authentication & Security (Staging-specific)
JWT_SECRET=staging_jwt_secret_change_in_production_2025
CORS_ORIGIN=*

# =============================================================================
# S3 Staging Configuration
# =============================================================================
S3_STAGING_BUCKET_NAME=portfolio-backups-staging
S3_REGION=us-east-1
S3_STAGING_ACCESS_KEY_ID=staging_access_key_id
S3_STAGING_SECRET_ACCESS_KEY=staging_secret_access_key
S3_BACKUP_PATH=staging-backups
S3_DEPLOYMENT_BACKUP_PATH=staging-deployment-backups
S3_UPLOAD_PREFIX=staging-uploads/

# =============================================================================
# Resource Management (Staging)
# =============================================================================
# MongoDB Resources
MONGO_MEMORY_LIMIT=2G
MONGO_CPU_LIMIT=2.0
MONGO_MEMORY_RESERVATION=1G
MONGO_CPU_RESERVATION=1.0

# Application Resources
APP_MEMORY_LIMIT=1G
APP_CPU_LIMIT=1.0

# =============================================================================
# Network Configuration
# =============================================================================
STAGING_NETWORK_SUBNET=172.21.0.0/16

# =============================================================================
# Data Persistence Paths
# =============================================================================
STAGING_MONGO_DATA_PATH=./data/staging/mongo
STAGING_MONGO_LOG_PATH=./logs/staging/mongo

# =============================================================================
# Build Configuration
# =============================================================================
BUILD_DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
VCS_REF=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")
DEPLOYMENT_ID=staging-$(date +%Y%m%d-%H%M%S)

# =============================================================================
# System Configuration
# =============================================================================
TZ=UTC
LANG=en_US.UTF-8
UID=1000
GID=1000

# =============================================================================
# Staging-Specific Feature Flags
# =============================================================================
ENABLE_BACKUP_SERVICE=true
ENABLE_HEALTH_MONITORING=true
ENABLE_DEBUG_LOGGING=true
SUPERVISOR_LOG_LEVEL=debug
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_SLOW_QUERY_LOG=true

# =============================================================================
# Logging and Monitoring
# =============================================================================
LOG_LEVEL=debug
DEBUG=app:*,mongo:*
ENABLE_PROFILING=true

# =============================================================================
# Feature Flags (Staging Testing)
# =============================================================================
USE_S3_CDN_STORAGE=false
ENABLE_LEGACY_FILESYSTEM=true
LOG_UPLOAD_PATHS=true
FEATURE_FLAG_LOGGING=true

# =============================================================================
# Backup Configuration (Staging)
# =============================================================================
MONGO_BACKUP_KEEP=3
ENABLE_DEPLOYMENT_BACKUP=true
DEPLOYMENT_BACKUP_PATH=staging-deployment-backups
DEPLOYMENT_BACKUP_KEEP=3

# =============================================================================
# Rollback Configuration (Staging)
# =============================================================================
ENABLE_AUTO_ROLLBACK=true
ROLLBACK_TIMEOUT_MINUTES=10
HEALTH_CHECK_RETRIES=5

# =============================================================================
# Performance Testing Configuration
# =============================================================================
PERFORMANCE_TEST_ENABLED=true
PERFORMANCE_TEST_ITERATIONS=1000
PERFORMANCE_TEST_CONCURRENT_USERS=10

# =============================================================================
# Security Testing Configuration
# =============================================================================
SECURITY_TEST_ENABLED=true
AUTH_TEST_ENABLED=true
SSL_TEST_ENABLED=false

# =============================================================================
# Integration Testing Configuration
# =============================================================================
INTEGRATION_TEST_ENABLED=true
API_TEST_ENABLED=true
DATABASE_TEST_ENABLED=true
BACKUP_RESTORE_TEST_ENABLED=true

# =============================================================================
# Staging Test Data
# =============================================================================
STAGING_TEST_DATA_SIZE=small
STAGING_TEST_USERS=5
STAGING_TEST_DOCUMENTS=100

# =============================================================================
# Monitoring and Alerting (Staging)
# =============================================================================
ENABLE_METRICS_COLLECTION=true
METRICS_INTERVAL=30
ALERT_EMAIL=staging-alerts@lynxpardelle.com
SLACK_WEBHOOK_URL=

# =============================================================================
# Docker Configuration
# =============================================================================
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# =============================================================================
# Development Tools (Staging)
# =============================================================================
ENABLE_DEBUG_TOOLS=true
ENABLE_PROFILER=true
ENABLE_QUERY_ANALYZER=true