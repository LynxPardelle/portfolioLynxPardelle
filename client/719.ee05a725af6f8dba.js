"use strict";(self.webpackChunkLynxPortfolio=self.webpackChunkLynxPortfolio||[]).push([[719],{5719:(Ht,T,r)=>{r.r(T),r.d(T,{BlogModule:()=>Jt});var c=r(6814),C=r(649),y=r(553),E=r(875),v=r(7825),t=r(5879),w=r(5852),m=r(9627),_=r(4437),K=r(7641),j=r(9862),B=r(4221);let x=(()=>{class o{constructor(e,s,i){this._http=e,this._mainService=s,this.store=i,this.urlBlog=y.N.api+"/article/",this.identity$=i.select(K.Lm),this.store.dispatch((0,v.L7)()),this.getIdentity()}getIdentity(){this.identity$.subscribe({next:e=>{void 0!==e&&(this.identity=e)},error:e=>console.error(e)})}createArticle(e){return this._http.post(`${this.urlBlog}article`,JSON.stringify(e))}createArticleSection(e){return this._http.post(`${this.urlBlog}articleSection`,JSON.stringify(e))}createArticleCat(e){return this._http.post(`${this.urlBlog}articleCat`,JSON.stringify(e))}createArticleSubCat(e){return this._http.post(`${this.urlBlog}articleSubCat`,JSON.stringify(e))}getArticles(e=1,s=5,i="_id",n,a,p){return this._http.get(`${this.urlBlog}articles/${e}/${s}/${i}${n?`/${n}`:""}${a?`/${a}`:""}${p?`/${p}`:""}`)}getArticleCats(){return this._http.get(`${this.urlBlog}article-cats`)}getArticleSubCats(){return this._http.get(`${this.urlBlog}article-sub-cats`)}getArticle(e){return this._http.get(`${this.urlBlog}article/${e}`)}updateArticle(e){return this._http.put(`${this.urlBlog}article/${e._id}`,JSON.stringify(e))}updateArticleSection(e){return this._http.put(`${this.urlBlog}article-section/${e._id}`,JSON.stringify(e))}updateArticleCat(e){return this._http.put(`${this.urlBlog}article-cat/${e._id}`,JSON.stringify(e))}updateArticleSubCat(e){return this._http.put(`${this.urlBlog}article-sub-cat/${e._id}`,JSON.stringify(e))}deleteArticle(e){return this._http.delete(`${this.urlBlog}article/${e}`)}deleteArticleSection(e){return this._http.delete(`${this.urlBlog}article-section/${e}`)}deleteArticleCat(e){return this._http.delete(`${this.urlBlog}article-cat/${e}`)}deleteArticleSubCat(e){return this._http.delete(`${this.urlBlog}article-sub-cat/${e}`)}static#t=this.\u0275fac=function(s){return new(s||o)(t.LFG(j.eN),t.LFG(w.J),t.LFG(B.yh))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var W=r(4119),k=r(7157),h=r(4204);const Z=function(){return["/blog/article"]};function z(o,l){1&o&&(t.TgZ(0,"a",4),t._uU(1,"Crear nuevo art\xedculo"),t.qZA()),2&o&&t.Q6J("routerLink",t.DdM(1,Z))}function V(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"article",7),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.cssCreate())}),t.TgZ(1,"h3",8),t._uU(2,"Title"),t.qZA(),t.TgZ(3,"span",9),t._uU(4," dd/mm/yy "),t.qZA(),t._UZ(5,"img",10),t.TgZ(6,"div",11)(7,"span",12),t._uU(8," Nuevo "),t.qZA(),t.TgZ(9,"span",13),t._uU(10," Cat 1 "),t.qZA(),t.TgZ(11,"span",14),t._uU(12," Cat 2 "),t.qZA()(),t.TgZ(13,"div",15)(14,"p",16),t._uU(15," Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore blanditiis amet inventore, nobis harum perspiciatis aut alias qui unde explicabo accusamus. "),t.qZA(),t.TgZ(16,"a",17),t._uU(17,"Ver m\xe1s"),t.qZA()()()}if(2&o){const e=l.index;t.Q6J("exist",l.last),t.xp6(5),t.hYB("src","https://picsum.photos/30",e,"/30",e,"",t.LSH)("alt","https://picsum.photos/30",e,"/30",e,""),t.xp6(11),t.Q6J("routerLink",t.DdM(6,Z))}}function R(o,l){if(1&o&&(t.ynx(0),t.TgZ(1,"section",5),t.YNc(2,V,18,7,"article",6),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.articles)}}function X(o,l){1&o&&(t.ynx(0),t.TgZ(1,"p",19),t._uU(2,"No hay art\xedculos."),t.qZA(),t.BQk())}function P(o,l){1&o&&(t.TgZ(0,"p",19),t._uU(1,"Cargando..."),t.qZA())}function tt(o,l){if(1&o&&(t.YNc(0,X,3,0,"ng-container",2),t.YNc(1,P,2,0,"ng-template",null,18,t.W1O)),2&o){const e=t.MAs(2),s=t.oxw();t.Q6J("ngIf",!s.loading)("ngIfElse",e)}}let d=(()=>{class o{constructor(e,s,i,n,a,p,S,b,q){this._route=e,this._mainService=s,this._webService=i,this._befService=n,this._blogService=a,this._translate=p,this._location=S,this._sharedService=b,this.store=q,this.articles=[],this.page=1,this.next_page=2,this.prev_page=1,this.total=0,this.itemsPerPage=5,this.noMore=!1,this.search="",this.loading=!0,this.lang="es",this.urlMain=y.N.api+"/main/",this.document="blog.component.ts",this.customConsoleCSS="background-color: rgba(75, 5, 200, 1); color: white; padding: 1em;",this.edit=!1,this.windowWidth=window.innerWidth,b.changeEmitted$.subscribe(g=>{if("object"==typeof g&&"blog"!==g.from&&("blog"===g.to||"all"===g.to))switch(g.property){case"lang":this.lang=g.thing;break;case"identity":this.identity=g.thing;break;case"windowWidth":this.windowWidth=g.thing;break;case"onlyConsoleMessage":this._webService.consoleLog(g.thing,this.document+" 67",this.customConsoleCSS)}}),this.main$=q.select(E.U7),this.identity=this._mainService.getIdentity(),this._webService.consoleLog(this.identity,this.document+" 79",this.customConsoleCSS),this._sharedService.emitChange({from:"blog",to:"all",property:"identity",thing:this.identity}),this.store.dispatch((0,v.L7)())}ngOnInit(){this._sharedService.emitChange({from:"blog",to:"all",property:"onlyConsoleMessage",thing:"Data from blog"}),this.getMain(),this.getBlog()}getMain(){this.main$.subscribe({next:e=>{void 0!==e&&(this.main=e,this.cssCreate())},error:e=>console.error(e)})}getBlog(){this.articles=[],this.loading=!0,this._route.params.subscribe({next:e=>{this.page=e.page?e.page:this.page,this.search=e.search?e.search:e.cat?e.cat:e.subcat?e.subcat:this.search,this.next_page=this.page+1,this.prev_page=this.page>1?this.page-1:1,this._blogService.getArticles(this.page,5,"_id","all","all",this.search||void 0).subscribe({next:s=>{this._webService.consoleLog(s,this.document+" 114",this.customConsoleCSS)},error:s=>{this.loading=!1,this._webService.consoleLog(s,this.document+" 165",this.customConsoleCSS)}})},error:e=>{this.loading=!1,this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS)}})}cssCreate(){this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(C.gz),t.Y36(w.J),t.Y36(m.Q),t.Y36(_.A),t.Y36(x),t.Y36(W.sK),t.Y36(c.Ye),t.Y36(k.F),t.Y36(B.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["blog"]],decls:6,vars:3,consts:[[1,"text-center","bef","bef-my-3rem"],["href","/article","class","d-block mx-auto my-3 btn bef bef-w-clampSD200pxCOM25perCOM300pxED bef-btn-fullYellow bef-text-tdark p-2",3,"routerLink",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseNoArticlesTemplate",""],["href","/article",1,"d-block","mx-auto","my-3","btn","bef","bef-w-clampSD200pxCOM25perCOM300pxED","bef-btn-fullYellow","bef-text-tdark","p-2",3,"routerLink"],[1,"w-100","d-flex","flex-wrap","justify-content-evenly"],["class","card bef bef-w-95per bef-wmx-300px mx-auto my-3 bef-bg-fullRed bef-text-tlight p-3 bef-rounded-15px",3,"exist","ngInit",4,"ngFor","ngForOf"],[1,"card","bef","bef-w-95per","bef-wmx-300px","mx-auto","my-3","bef-bg-fullRed","bef-text-tlight","p-3","bef-rounded-15px",3,"exist","ngInit"],[1,"card-title","text-center"],[1,"my-1","text-center"],[1,"w-50","obj-fit-cover","d-block","mx-auto","my-3","bef","bef-rounded-15px","bef-boxShadow-0__2px__2px__tdark",3,"src","alt"],[1,"d-flex","flex-wrap","justify-content-evenly","w-75","mx-auto"],[1,"badge","bg-info"],[1,"badge","bg-success"],[1,"badge","bg-warning"],[1,"card-body"],[1,"card-text","my-3"],["href","/article",1,"card-link","badge","bef","bef-btn-fullYellow","bef-text-tdark","p-2",3,"routerLink"],["elseLoadingTemplate",""],[1,"text-center","p-5"]],template:function(s,i){if(1&s&&(t.TgZ(0,"h2",0),t._uU(1,"Blog"),t.qZA(),t.YNc(2,z,2,2,"a",1),t.YNc(3,R,3,1,"ng-container",2),t.YNc(4,tt,3,2,"ng-template",null,3,t.W1O)),2&s){const n=t.MAs(5);t.xp6(2),t.Q6J("ngIf",i.identity&&"ROLE_ADMIN"==i.identity.role),t.xp6(1),t.Q6J("ngIf",i.articles.length>0)("ngIfElse",n)}},dependencies:[c.sg,c.O5,C.rH,h.Q]})}return o})();var et=r(6436),it=r(4099);function ot(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"generic-button",3),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.cssCreate())})("clicked",function(i){t.CHM(e);const n=t.oxw(2);return t.KtG(n.clicked.emit(i))})("buttonId",function(i){const a=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.buttonId.emit({id:i,index:a}))}),t.qZA()}if(2&o){const e=l.$implicit,s=l.index,i=l.last,n=t.oxw(2);t.Q6J("exist",i)("type",e.type?e.type:"customHTML "+s)("classButton",e.classButton?e.classButton:" m-0 bef-borderColor-btnBG bef-borderStyle-solid "+(0===s?"bef-borderwidth0":" bef-borderwidth0__0__0__2px ")+(s===n.buttons.length-1?" bef-rounded-0__10px__10px__0 ":0===s?" bef-rounded-10px__0__0__10px ":" bef-rounded-0 "))("disabledClassButton",e.disabledClassButton?e.disabledClassButton:"")("customHtml",e.customHtml?e.customHtml:e.type?e.type:"Button "+s)("disabled",!!e.disabled&&e.disabled)("tooltip",e.tooltip?e.tooltip:"")("placement",e.placement?e.placement:"auto")("tooltipClass",e.tooltipClass?e.tooltipClass:"")}}function st(o,l){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,ot,1,9,"generic-button",2),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",e.buttonComboClass),t.xp6(1),t.Q6J("ngForOf",e.buttons)}}let A=(()=>{class o{constructor(e){this._befService=e,this.buttons=[],this.buttonComboClass="d-inline-block mx-auto mat-elevation-z1 bef bef-rounded-10px",this.clicked=new t.vpe,this.buttonId=new t.vpe}ngOnInit(){this.cssCreate()}cssCreate(){this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(_.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["generic-group-buttons"]],inputs:{buttons:"buttons",buttonComboClass:"buttonComboClass"},outputs:{clicked:"clicked",buttonId:"buttonId"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"exist","type","classButton","disabledClassButton","customHtml","disabled","tooltip","placement","tooltipClass","ngInit","clicked","buttonId",4,"ngFor","ngForOf"],[3,"exist","type","classButton","disabledClassButton","customHtml","disabled","tooltip","placement","tooltipClass","ngInit","clicked","buttonId"]],template:function(s,i){1&s&&t.YNc(0,st,2,2,"div",0),2&s&&t.Q6J("ngIf",i.buttons.length>0)},dependencies:[c.mk,c.sg,c.O5,et.i9,h.Q,it.x]})}return o})();const nt=function(o){return["/blog/list-cat/",o,"1"]};function lt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cssCreate())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit,s=l.last;t.MT6("btn text-center bef-lh-1_5 badge rounded-pill px-3 py-1 bef-bg-",e.buttonColor?e.buttonColor.replace("#","HASH"):"dark"," bef-text-",e.titleColor?e.titleColor.replace("#","HASH"):"light",""),t.MGl("href","/blog/list-cat/",e._id,"/1",t.LSH),t.Q6J("exist",s)("routerLink",t.VKq(8,nt,e._id)),t.xp6(1),t.hij(" ",e.title," ")}}let at=(()=>{class o{constructor(e){this._befService=e,this.lang="es"}cssCreate(){this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(_.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["blog-cat-badgets"]],inputs:{cats:"cats",lang:"lang"},decls:2,vars:1,consts:[[1,"d-flex","flex-wrap","justify-content-start","align-items-center","mx-auto","bef","bef-w-clampSD200pxCOM50perCOM50perED","bef-my-1_5rem"],["rel"," noopener noreferrer ",3,"exist","class","routerLink","href","ngInit",4,"ngFor","ngForOf"],["rel"," noopener noreferrer ",3,"exist","routerLink","href","ngInit"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.YNc(1,lt,2,10,"a",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",i.cats))},dependencies:[c.sg,C.rH,h.Q]})}return o})();const rt=function(o){return["/blog/list-subcat/",o,"1"]};function ct(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cssCreate())}),t._uU(1),t.qZA()}if(2&o){const e=l.$implicit,s=l.last,i=t.oxw();t.Gre("btn text-center bef-lh-1_5 badge rounded-pill px-3 py-1 ","bef-text-"+e.titleColor.replace("#","HASH")+" bef-bg-"+e.buttonColor.replace("#","HASH"),""),t.MGl("href","/blog/list-subcat/",e._id,"/1",t.LSH),t.Q6J("exist",s)("routerLink",t.VKq(7,rt,e._id)),t.xp6(1),t.hij(" ","es"===i.lang?e.title:e.titleEng," ")}}let ut=(()=>{class o{constructor(e){this._befService=e,this.lang="es"}cssCreate(){this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(_.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["blog-subcat-badgets"]],inputs:{subcats:"subcats",lang:"lang"},decls:2,vars:1,consts:[[1,"d-flex","flex-wrap","justify-content-start","align-items-center","mx-auto","bef","bef-w-clampSD200pxCOM50perCOM50perED","bef-my-1_5rem"],["rel"," noopener noreferrer ",3,"exist","class","routerLink","href","ngInit",4,"ngFor","ngForOf"],["rel"," noopener noreferrer ",3,"exist","routerLink","href","ngInit"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.YNc(1,ct,2,9,"a",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",i.subcats))},dependencies:[c.sg,C.rH,h.Q]})}return o})();var bt=r(3519),u=r.n(bt),f=r(6223),I=r(1971);const gt=function(o,l){return{"bef-bc-success":o,"bef-bc-transparent":l}},L="bef-btn-fullYellow bef-cursor-pointer mx-2 bef-w-50px bef-h-50px",dt=function(o,l){return{type:o,classButton:L,customHtml:l,tooltip:"Editar"}},pt=function(o,l){return{type:o,classButton:L,customHtml:l,tooltip:"Borrar"}},M=function(o,l){return[o,l]};function Ct(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cssCreate())}),t.TgZ(1,"label",11),t.NdJ("click",function(){const n=t.CHM(e).index,a=t.oxw();return t.KtG(a.onClickChangeCat(a.cats[n]._id))}),t._uU(2),t.qZA(),t.TgZ(3,"generic-group-buttons",9),t.NdJ("clicked",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickButton(i))}),t.qZA()()}if(2&o){const e=l.$implicit,s=l.index,i=l.last,n=t.oxw();t.Q6J("exist",i)("ngClass",t.WLB(9,gt,!!n.catBringer(e,!0),!n.catBringer(e,!0))),t.xp6(1),t.MT6("d-block badge rounded-pill bef bef-mb-1rem bef-p-0_5rem__1rem bef-bg-",e.buttonColor?n.befisize(e.buttonColor):"dark"," bef-text-",e.titleColor?n.befisize(e.titleColor):"light",""),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("buttonComboClass","d-flex justify-content-center")("buttons",t.WLB(18,M,t.WLB(12,dt,"edit\u253ccat\u253c"+n.cats[s]._id,"edit\u253ccat\u253c"+n.cats[s]._id),t.WLB(15,pt,"delete\u253ccat\u253c"+n.cats[s]._id,"delete\u253ccat\u253c"+n.cats[s]._id)))}}const _t=function(){return{text:"La categor\xeda no es v\xe1lida.",evalThing:"required",spanClass:"bef-text-fullRed"}},J=function(o){return[o]},H="bef-btn-fullYellow bef-cursor-pointer mx-3 bef-w-50px bef-h-50px",ht=function(o,l){return{type:o,classButton:H,customHtml:l,tooltip:"Cancelar"}},F=function(o){return{type:"aceptCat",classButton:H,disabledClassButton:"mx-3 bef-w-50px bef-h-50px",customHtml:"aceptCat",tooltip:"Aceptar",disabled:o}};let ft=(()=>{class o{constructor(e,s,i){this._blogService=e,this._webService=s,this._befService=i,this.cat={_id:"",title:"",titleEng:"",titleColor:"",textColor:"",textColor2:"",linkColor:"",linkColor2:"",bgColor:"",bgColor2:"",buttonColor:"",subcats:[],show:!0,create_at:new Date},this.getArticleCats=new t.vpe,this.catSelected=new t.vpe}ngOnInit(){this.cssCreate()}onSubmitCatDelete(e){u().fire({title:"\xbfEstas seguro?",text:"\xa1Una vez borrada la categor\xeda, ya no se podr\xe1 recuperar!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ok",cancelButtonText:"Cancel"}).then(s=>{if(s?.isConfirmed){let i=e._id;this._webService.consoleLog(i),this._blogService.deleteArticleCat(i).subscribe({next:n=>{this.getArticleCats.emit(),u().fire("Categor\xeda eliminada","La categor\xeda fue borrada con \xe9xito","success")},error:n=>{this._webService.consoleLog(n),u().fire("Error al eliminar","Hubo un error al eliminar, favor de revisar la consola","success")}})}else u().fire("Calma, nada se borr\xf3")})}onSubmitCat(){console.log("cat",this.cat),""==this.cat.buttonColor||""==this.cat.titleColor||""==this.cat.title?u().fire("Faltan datos","Es necesario los colores de fondo y texto y el nombre de la categor\xeda.","error"):this.cat._id?this._blogService.updateArticleCat(this.cat).subscribe({next:e=>{this._webService.consoleLog(e),e.articleCat&&(this.cat={_id:"",title:"",titleEng:"",titleColor:"",textColor:"",textColor2:"",linkColor:"",linkColor2:"",bgColor:"",bgColor2:"",buttonColor:"",subcats:[],show:!0,create_at:new Date},u().fire("Categor\xeda actualizada","La categor\xeda fue actualizada con \xe9xito","success"),this.getArticleCats.emit())},error:e=>{this._webService.consoleLog(e)}}):this._blogService.createArticleCat(this.cat).subscribe({next:e=>{this._webService.consoleLog(e),e.articleCat&&(this.cat={_id:"",title:"",titleEng:"",titleColor:"",textColor:"",textColor2:"",linkColor:"",linkColor2:"",bgColor:"",bgColor2:"",buttonColor:"",subcats:[],show:!0,create_at:new Date},u().fire("Categor\xeda creada","La categor\xeda fue creada con \xe9xito","success"),this.getArticleCats.emit())},error:e=>{this._webService.consoleLog(e)}})}onClickChangeCat(e){!this.article.cat!==e?this.article.cat=e:delete this.article.cat,this.catSelected.emit()}catBringer(e,s=!1){const i=this.article.cat;return("string"!=typeof e&&e._id?e._id:e.toString())===("string"!=typeof i&&i._id?i._id:i.toString())}onClickCatUpdate(e){this.cat=this.cat!==e&&e?e:{_id:"",title:"",titleEng:"",titleColor:"",textColor:"",textColor2:"",linkColor:"",linkColor2:"",bgColor:"",bgColor2:"",buttonColor:"",subcats:[],show:!0,create_at:new Date}}onClickButton(e){switch(!0){case e.includes("edit\u253ccat\u253c")||e.includes("cancel\u253ccat\u253c"):let s=this.cats.find(n=>n._id===e.split("\u253c")[2]);this.onClickCatUpdate(s);break;case e.includes("delete\u253ccat\u253c"):let i=this.cats.find(n=>n._id===e.split("\u253c")[2]);i&&this.onSubmitCatDelete(i);break;case"aceptCat"===e:console.log("aceptCat"),this.onSubmitCat()}}cssCreate(){this._befService.cssCreate()}befisize(e){return this._befService.befysize(e)}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(x),t.Y36(m.Q),t.Y36(_.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["blog-cat-edit"]],inputs:{article:"article",cats:"cats"},outputs:{getArticleCats:"getArticleCats",catSelected:"catSelected"},decls:13,vars:38,consts:[[1,"text-center","bef-my-1_5rem","bef-text-tlight"],[1,"d-flex","justify-content-evenly","align-items-center","flex-wrap"],["class","p-2 text-center bef bef-lh-1_5 bef-bw-0_25rem bef-bs-solid bef-r-25px",3,"exist","ngClass","ngInit",4,"ngFor","ngForOf"],[1,"d-block","my-3"],[1,"d-block","w-75","mx-auto","my-3",3,"thingFather","thing","type","labelTitle","placeholder","spans","labelClasses","inputClasses","inputContainerClasses","hrClasses","changesInput"],["for","cat.buttonColor"],["type","color","id","cat.buttonColor","name","cat.buttonColor","value","cat.buttonColor",3,"ngModel","ngModelChange"],["for","cat.titleColor"],["type","color","id","cat.titleColor","name","cat.titleColor","value","cat.titleColor",3,"ngModel","ngModelChange"],[3,"buttonComboClass","buttons","clicked"],[1,"p-2","text-center","bef","bef-lh-1_5","bef-bw-0_25rem","bef-bs-solid","bef-r-25px",3,"exist","ngClass","ngInit"],[3,"click"]],template:function(s,i){1&s&&(t.TgZ(0,"h3",0),t._uU(1," Selecciona la categor\xeda del art\xedculo\n"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,Ct,4,21,"div",2),t.qZA(),t.TgZ(4,"div",3)(5,"generic-input",4),t.NdJ("changesInput",function(){return null}),t.qZA(),t.TgZ(6,"label",5),t._uU(7," Color del fondo de la categor\xeda "),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(a){return i.cat.buttonColor=a})("ngModelChange",function(){return i.cssCreate()}),t.qZA()(),t.TgZ(9,"label",7),t._uU(10," Color de las letras de la categor\xeda "),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(a){return i.cat.titleColor=a})("ngModelChange",function(){return i.cssCreate()}),t.qZA()(),t.TgZ(12,"generic-group-buttons",9),t.NdJ("clicked",function(a){return i.onClickButton(a)}),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("ngForOf",i.cats),t.xp6(2),t.Q6J("thingFather",i.cat)("thing","title")("type","text")("labelTitle","Categor\xeda")("placeholder","Categor\xeda")("spans",t.VKq(24,J,t.DdM(23,_t)))("labelClasses","bef-text-tlight")("inputClasses","bef-text-fullYellow w-100 border-0 bg-transparent")("inputContainerClasses","d-flex bef bef-w-100per align-items-center")("hrClasses","bef-bg-tlight"),t.xp6(1),t.MT6("btn d-block w-75 mx-auto my-2 bef bef-bg-",i.cat.buttonColor?i.befisize(i.cat.buttonColor):"dark"," bef-text-",i.cat.titleColor?i.befisize(i.cat.titleColor):"light",""),t.xp6(2),t.Q6J("ngModel",i.cat.buttonColor),t.xp6(1),t.MT6("btn d-block w-75 mx-auto my-2 bef bef-bg-",i.cat.buttonColor?i.befisize(i.cat.buttonColor):"dark"," bef-text-",i.cat.titleColor?i.befisize(i.cat.titleColor):"light",""),t.xp6(2),t.Q6J("ngModel",i.cat.titleColor),t.xp6(1),t.Q6J("buttonComboClass","d-flex justify-content-center")("buttons",i.cat._id?t.WLB(31,M,t.WLB(26,ht,"cancel\u253ccat\u253c"+i.cat._id,"cancel\u253ccat\u253c"+i.cat._id),t.VKq(29,F,!i.cat.title)):t.VKq(36,J,t.VKq(34,F,!i.cat.title))))},dependencies:[c.mk,c.sg,f.Fj,f.JJ,f.On,h.Q,I.V,A]})}return o})();const mt=function(o,l){return{"bef-bc-success":o,"bef-bc-transparent":l}},N="bef-btn-fullYellow bef-cursor-pointer mx-2 bef-w-50px bef-h-50px",xt=function(o,l){return{type:o,classButton:N,customHtml:l,tooltip:"Editar"}},St=function(o,l){return{type:o,classButton:N,customHtml:l,tooltip:"Borrar"}},Y=function(o,l){return[o,l]};function yt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cssCreate())}),t.TgZ(1,"label",11),t.NdJ("click",function(){const n=t.CHM(e).index,a=t.oxw();return t.KtG(a.onClickChangeSubCat(a.subCats[n]._id))}),t._uU(2),t.qZA(),t.TgZ(3,"generic-group-buttons",9),t.NdJ("clicked",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickButton(i))}),t.qZA()()}if(2&o){const e=l.$implicit,s=l.index,i=l.last,n=t.oxw();t.Q6J("exist",i)("ngClass",t.WLB(8,mt,!!n.subCatBringer(e,!0),!n.subCatBringer(e,!0))),t.xp6(1),t.Gre("d-block badge rounded-pill bef bef-mb-1rem bef-p-0_5rem__1rem ","bef-text-"+e.titleColor.replace("#","HASH")+" bef-bg-"+e.buttonColor.replace("#","HASH"),""),t.xp6(1),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("buttonComboClass","d-flex justify-content-center")("buttons",t.WLB(17,Y,t.WLB(11,xt,"edit\u253csubCat\u253c"+n.subCats[s]._id,"edit\u253csubCat\u253c"+n.subCats[s]._id),t.WLB(14,St,"delete\u253csubCat\u253c"+n.subCats[s]._id,"delete\u253csubCat\u253c"+n.subCats[s]._id)))}}const vt=function(){return{text:"La sub-categor\xeda no es v\xe1lida.",evalThing:"required",spanClass:"bef-text-fullRed"}},Q=function(o){return[o]},$="bef-btn-fullYellow bef-cursor-pointer mx-3 bef-w-50px bef-h-50px",wt=function(o,l){return{type:o,classButton:$,customHtml:l,tooltip:"Cancelar"}},D=function(o){return{type:"aceptCat",classButton:$,disabledClassButton:"mx-3 bef-w-50px bef-h-50px",customHtml:"aceptCat",tooltip:"Aceptar",disabled:o}};let Bt=(()=>{class o{constructor(e,s,i){this._blogService=e,this._webService=s,this._befService=i,this.subCat={_id:"",title:"",titleEng:"",titleColor:"",buttonColor:"",cat:"",show:!0,create_at:new Date},this.getArticleSubCats=new t.vpe}ngOnInit(){this.cssCreate()}onSubmitSubCatDelete(e){u().fire({title:"\xbfEstas seguro?",text:"\xa1Una vez borrada la sub-categor\xeda, ya no se podr\xe1 recuperar!",icon:"warning",showCancelButton:!0,confirmButtonText:"Ok",cancelButtonText:"Cancel"}).then(s=>{if(s?.isConfirmed){let i=e._id;this._webService.consoleLog(i),this._blogService.deleteArticleSubCat(i).subscribe({next:n=>{this.getArticleSubCats.emit(),u().fire("Sub-categor\xeda eliminada","La sub-categor\xeda fue borrada con \xe9xito","success")},error:n=>{this._webService.consoleLog(n),u().fire("Error al eliminar","Hubo un error al eliminar, favor de revisar la consola","success")}})}else u().fire("Calma, nada se borr\xf3")})}onSubmitSubCat(){this.subCat.cat=this.article.cat,""==this.subCat.buttonColor||""==this.subCat.titleColor||""==this.subCat.title||""===this.subCat.cat?u().fire("Faltan datos","Es necesario los colores de fondo y texto y el nombre de la sub-categor\xeda.","error"):this.subCat._id?this._blogService.updateArticleSubCat(this.subCat).subscribe({next:e=>{this._webService.consoleLog(e),e.articleSubCat&&(this.subCat={_id:"",title:"",titleEng:"",titleColor:"",buttonColor:"",cat:"",show:!0,create_at:new Date},u().fire("Sub-categor\xeda actualizada","La sub-categor\xeda fue actualizada con \xe9xito","success"),this.getArticleSubCats.emit())},error:e=>{this._webService.consoleLog(e)}}):this._blogService.createArticleSubCat(this.subCat).subscribe({next:e=>{this._webService.consoleLog(e),e.articleSubCat&&(this.subCat={_id:"",title:"",titleEng:"",titleColor:"",buttonColor:"",cat:"",show:!0,create_at:new Date},u().fire("Sub-categor\xeda creada","La sub-categor\xeda fue creada con \xe9xito","success"),this.getArticleSubCats.emit())},error:e=>{this._webService.consoleLog(e)}})}onClickChangeSubCat(e){if(this.article.subCats.includes(e)){let s=this.article.subCats.indexOf(e);s>-1&&this.article.subCats.splice(s,1)}else this.article.subCats.push(e)}subCatBringer(e,s=!1){return this.article.subCats.find(i=>("string"!=typeof e&&e._id?e._id:e.toString())===("string"!=typeof i&&i._id?i._id:i.toString()))}onClickSubCatUpdate(e){this.subCat=this.subCat!==e&&e?e:{_id:"",title:"",titleEng:"",titleColor:"",buttonColor:"",cat:"",show:!0,create_at:new Date}}onClickButton(e){switch(!0){case e.includes("edit\u253csubCat\u253c")||e.includes("cancel\u253csubCat\u253c"):let s=this.subCats.find(n=>"string"!=typeof n&&n._id?n._id===e.split("\u253c")[2]:n===e.split("\u253c")[2]);this.onClickSubCatUpdate(s);break;case e.includes("delete\u253csubCat\u253c"):let i=this.subCats.find(n=>"string"!=typeof n&&n._id?n._id===e.split("\u253c")[2]:n===e.split("\u253c")[2]);i&&this.onSubmitSubCatDelete(i);break;case"aceptCat"===e:console.log("aceptCat"),this.onSubmitSubCat()}}cssCreate(){console.log("cssCreate"),this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(x),t.Y36(m.Q),t.Y36(_.A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["blog-subcat-edit"]],inputs:{article:"article",subCats:"subCats"},outputs:{getArticleSubCats:"getArticleSubCats"},decls:13,vars:38,consts:[[1,"text-center","bef-my-1_5rem","bef-text-tlight"],[1,"d-flex","justify-content-evenly","align-items-center","flex-wrap"],["class","p-2 text-center bef bef-lh-1_5 bef-bw-0_25rem bef-bs-solid bef-r-25px",3,"exist","ngClass","ngInit",4,"ngFor","ngForOf"],[1,"d-block","my-3"],[1,"d-block","w-75","mx-auto","my-3",3,"thingFather","thing","type","labelTitle","placeholder","spans","labelClasses","inputClasses","inputContainerClasses","hrClasses","changesInput"],["for","subCat.buttonColor"],["type","color","id","subCat.buttonColor","name","subCat.buttonColor","value","subCat.buttonColor",3,"ngModel","ngModelChange"],["for","subCat.titleColor"],["type","color","id","subCat.titleColor","name","subCat.titleColor","value","subCat.titleColor",3,"ngModel","ngModelChange"],[3,"buttonComboClass","buttons","clicked"],[1,"p-2","text-center","bef","bef-lh-1_5","bef-bw-0_25rem","bef-bs-solid","bef-r-25px",3,"exist","ngClass","ngInit"],[3,"click"]],template:function(s,i){1&s&&(t.TgZ(0,"h3",0),t._uU(1," Selecciona las sub-categor\xedas del art\xedculo\n"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,yt,4,20,"div",2),t.qZA(),t.TgZ(4,"div",3)(5,"generic-input",4),t.NdJ("changesInput",function(){return null}),t.qZA(),t.TgZ(6,"label",5),t._uU(7," Color del fondo de la sub-categor\xeda "),t.TgZ(8,"input",6),t.NdJ("ngModelChange",function(a){return i.subCat.buttonColor=a})("ngModelChange",function(){return i.cssCreate()}),t.qZA()(),t.TgZ(9,"label",7),t._uU(10," Color de las letras de la sub-categor\xeda "),t.TgZ(11,"input",8),t.NdJ("ngModelChange",function(a){return i.subCat.titleColor=a})("ngModelChange",function(){return i.cssCreate()}),t.qZA()(),t.TgZ(12,"generic-group-buttons",9),t.NdJ("clicked",function(a){return i.onClickButton(a)}),t.qZA()()),2&s&&(t.xp6(3),t.Q6J("ngForOf",i.subCats),t.xp6(2),t.Q6J("thingFather",i.subCat)("thing","title")("type","text")("labelTitle","SubCategor\xeda")("placeholder","SubCategor\xeda")("spans",t.VKq(24,Q,t.DdM(23,vt)))("labelClasses","bef-text-tlight")("inputClasses","bef-text-fullYellow w-100 border-0 bg-transparent")("inputContainerClasses","d-flex bef bef-w-100per align-items-center")("hrClasses","bef-bg-tlight"),t.xp6(1),t.MT6("btn d-block w-75 mx-auto my-2 bef bef-bg-",i.subCat.buttonColor.replace("#","HASH")||"dark"," bef-text-",i.subCat.titleColor.replace("#","HASH")||"light",""),t.xp6(2),t.Q6J("ngModel",i.subCat.buttonColor),t.xp6(1),t.MT6("btn d-block w-75 mx-auto my-2 bef bef-bg-",i.subCat.buttonColor.replace("#","HASH")||"dark"," bef-text-",i.subCat.titleColor.replace("#","HASH")||"light",""),t.xp6(2),t.Q6J("ngModel",i.subCat.titleColor),t.xp6(1),t.Q6J("buttonComboClass","d-flex justify-content-center")("buttons",i.subCat._id?t.WLB(31,Y,t.WLB(26,wt,"cancel\u253csubCat\u253c"+i.subCat._id,"cancel\u253csubCat\u253c"+i.subCat._id),t.VKq(29,D,!i.subCat.title)):t.VKq(36,Q,t.VKq(34,D,!i.subCat.title))))},dependencies:[c.mk,c.sg,f.Fj,f.JJ,f.On,h.Q,I.V,A]})}return o})();var O=r(7828);function At(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"generic-group-buttons",6),t.NdJ("clicked",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.onClickButton(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("buttonComboClass","position-fixed d-flex justify-content-start bef bef-t-9rem bef-e-3rem")("buttons",e.buttonsToEdit)}}function Tt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"p",7),t.NdJ("ngInit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cssCreate())}),t._uU(1),t.ALo(2,"amDateFormat"),t.ALo(3,"amLocale"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("exist",!!e.article.create_at),t.xp6(1),t.hij(" ",t.xi3(2,2,t.xi3(3,5,e.article.create_at,"es"),"LL"),"\n")}}const G=function(o){return[o]};function Et(o,l){if(1&o&&t._UZ(0,"blog-cat-badgets",8),2&o){const e=t.oxw();t.Q6J("cats",t.VKq(2,G,e.article.cat))("lang",e.lang)}}function kt(o,l){if(1&o&&t._UZ(0,"blog-subcat-badgets",9),2&o){const e=t.oxw();t.Q6J("subcats",t.VKq(2,G,e.article.cat.subCats))("lang",e.lang)}}function Zt(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"blog-subcat-edit",10),t.NdJ("getArticleSubCats",function(){t.CHM(e);const i=t.oxw();return i.getCats(),t.KtG(i.getSubCats())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("article",e.article)("subCats",e.availableSubCats)}}let U=(()=>{class o{constructor(e,s,i,n,a,p,S){this._router=e,this._mainService=s,this._webService=i,this._befService=n,this._blogService=a,this._sharedService=p,this.store=S,this.article={_id:"",title:"",titleEng:"",subtitle:"",subtitleEng:"",insertions:[],cat:"",subCats:[],intro:"",introEng:"",outro:"",outroEng:"",sections:[],tags:"",urltitle:"",coverImg:[],titleColor:"",textColor:"",linkColor:"",bgColor:"",langs:[],show:!0,create_at:new Date},this.cats=[],this.allSubCats=[],this.availableSubCats=[],this.articleSection={_id:"",title:"",titleEng:"",text:"",textEng:"",article:"",principalFile:"",files:[],order:0,titleColor:"",textColor:"",linkColor:"",bgColor:"",show:!0,insertions:[]},this.lang="es",this.urlMain=y.N.api+"/main/",this.document="blog.component.ts",this.customConsoleCSS="background-color: rgba(175, 135, 2, 1); color: white; padding: 1em;",this.isEdit=!1,this.windowWidth=window.innerWidth,this.edits=[],this.buttonsToEdit=[],this.canEdit=!1,this._sharedService.changeEmitted$.subscribe(b=>{if("object"==typeof b&&"blog"!==b.from&&("blog"===b.to||"all"===b.to))switch(b.property){case"lang":this.lang=b.thing;break;case"identity":this.identity=b.thing,this.checkIfCanEdit();break;case"windowWidth":this.windowWidth=b.thing;break;case"onlyConsoleMessage":this._webService.consoleLog(b.thing,this.document+" 67",this.customConsoleCSS)}}),this.main$=S.select(E.U7),this.identity=this._mainService.getIdentity(),this.checkIfCanEdit(),this._webService.consoleLog(this.identity,this.document+" 79",this.customConsoleCSS),this._sharedService.emitChange({from:"blog",to:"all",property:"identity",thing:this.identity}),this.store.dispatch((0,v.L7)())}ngOnInit(){this.getMain(),this._router.params.subscribe(e=>{this.article._id=e.id||"",void 0!==this.article._id&&""!==this.article._id?this.getArticle():this.onClickIsEdit()}),this.getCats(),this.getSubCats()}getMain(){this.main$.subscribe({next:e=>{void 0!==e&&(this.main=e,this.cssCreate())},error:e=>console.error(e)})}getArticle(){this._blogService.getArticle(this.article._id).subscribe({next:e=>{e?.article?this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS):this.article=e.article,this.bringSubCatsFromSelectedCat()},error:e=>{this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS)}})}getCats(){this._blogService.getArticleCats().subscribe({next:e=>{void 0!==e&&(this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS),this.cats=e.articleCats?e.articleCats:[]),this.bringSubCatsFromSelectedCat()},error:e=>{this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS)}})}getSubCats(){this._blogService.getArticleSubCats().subscribe({next:e=>{void 0!==e&&(this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS),this.allSubCats=e.articleSubCats?e.articleSubCats:[]),this.bringSubCatsFromSelectedCat()},error:e=>{this._webService.consoleLog(e,this.document+" 165",this.customConsoleCSS)}})}createButtons(){[{condition:!this.isEdit,type:"edit",title:"Editar"},{condition:!!this.isEdit&&!!this.article._id,type:"delete",title:"Borrar"},{condition:!!this.isEdit,type:"cancel",title:"Cancelar"}].forEach(e=>{e.condition&&!this.buttonsToEdit.find(s=>s.type===e.type)&&this.buttonsToEdit.push({type:e.type,classButton:"btn mx-2 bef-w-50px bef-h-50px bef-bg-fullYellow",customHtml:e.type,tooltip:e.title})})}onClickButton(e){switch(this._webService.consoleLog(e),!0){case["edit","cancel"].includes(e):this.onClickIsEdit();break;case"delete"===e:case"submit"===e:break;case e.includes("\u253ctype\u253c"):let s=e.split("\u253c")[2];this._webService.consoleLog(s),this.edits.includes(s)?(this.edits=this.edits.filter(i=>i!==s),this._webService.consoleLog(this.edits)):this.edits.push(s),this._webService.consoleLog(this.edits)}}onClickIsEdit(){this.isEdit=!this.article._id||!!this.canEdit&&!this.isEdit,this.edits=this.canEdit&&this.isEdit||void 0===this.article._id?["title","ytvideo","int","out","stitle","sp","syoutube"]:[],console.log(this.edits),console.log(this.isEdit),this.createButtons()}checkIfCanEdit(){this.canEdit=this.identity&&"ROLE_ADMIN"===this.identity.role}bringSubCatsFromSelectedCat(){if(this.article.cat){let e=this.cats.find(s=>"string"!=typeof this.article.cat&&this.article.cat._id?s._id===this.article.cat._id:s._id===this.article.cat);this.availableSubCats=e.subcats.map(s=>(("string"==typeof s||!s._id)&&(s=this.allSubCats.find(i=>"string"!=typeof i&&i._id?i._id===s:i===s)),s))}else this.availableSubCats=[]}cssCreate(){this._befService.cssCreate()}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(C.gz),t.Y36(w.J),t.Y36(m.Q),t.Y36(_.A),t.Y36(x),t.Y36(k.F),t.Y36(B.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-article"]],decls:6,vars:7,consts:[[3,"buttonComboClass","buttons","clicked",4,"ngIf"],["class","text-center bef bef-py-1_5rem",3,"exist","ngInit",4,"ngIf"],[3,"cats","lang",4,"ngIf"],[3,"article","cats","getArticleCats","catSelected"],[3,"subcats","lang",4,"ngIf"],[3,"article","subCats","getArticleSubCats",4,"ngIf"],[3,"buttonComboClass","buttons","clicked"],[1,"text-center","bef","bef-py-1_5rem",3,"exist","ngInit"],[3,"cats","lang"],[3,"subcats","lang"],[3,"article","subCats","getArticleSubCats"]],template:function(s,i){1&s&&(t.YNc(0,At,1,2,"generic-group-buttons",0),t.YNc(1,Tt,4,8,"p",1),t.YNc(2,Et,1,4,"blog-cat-badgets",2),t.TgZ(3,"blog-cat-edit",3),t.NdJ("getArticleCats",function(){return i.getCats(),i.getSubCats()})("catSelected",function(){return i.bringSubCatsFromSelectedCat()}),t.qZA(),t.YNc(4,kt,1,4,"blog-subcat-badgets",4),t.YNc(5,Zt,1,2,"blog-subcat-edit",5)),2&s&&(t.Q6J("ngIf",!!i.canEdit||!i.article._id),t.xp6(1),t.Q6J("ngIf",!!i.article.create_at),t.xp6(1),t.Q6J("ngIf",!!i.article.cat&&!!i.article.cat._id),t.xp6(1),t.Q6J("article",i.article)("cats",i.cats),t.xp6(1),t.Q6J("ngIf",!!(i.article.cat&&i.article.cat._id&&i.article.cat.subCats&&null!=i.article.cat.subCats[0]&&i.article.cat.subCats[0]._id)),t.xp6(1),t.Q6J("ngIf",!!i.article.cat))},dependencies:[c.O5,h.Q,A,at,ut,ft,Bt,O.Ek,O.Ue]})}return o})();const It=[{path:"",component:d},{path:"article",component:U},{path:"article/:id",component:U},{path:":page",component:d},{path:"list-cat/:cat",component:d},{path:"list-cat/:cat/:page",component:d},{path:"list-subcat/:subcat",component:d},{path:"list-subcat/:subcat/:page",component:d},{path:"search/:search",component:d},{path:"search/:search/:page",component:d}];let Lt=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[C.Bz.forChild(It),C.Bz]})}return o})();var Mt=r(5586);let Jt=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.oAB({type:o});static#i=this.\u0275inj=t.cJS({imports:[c.ez,Lt,Mt.m]})}return o})()}}]);